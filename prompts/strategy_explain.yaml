# prompts/strategy_explain.yaml
version: "1.0"
task: "Erkläre ein Handelssignal (nicht autonom ausführen)."
inputs:
  symbol: str
  timeframe: str
  indicators: # kompaktes Kontextobjekt aus C1
    rsi: float
    macd: { "macd": float, "signal": float, "hist": float }
    sma: { "fast": float, "slow": float }
    bbands: { "upper": float, "middle": float, "lower": float }
  price: float
  fees_preview_eur: float
  risk_context:
    atr: float
    recent_volatility: float
  strategy_name: str
requirements:
  - "Nutze ausschließlich die gelieferten Eingaben."
  - "Antworte strikt im Schema 'AnalysisResult'."
  - "Wenn unzureichender Kontext, setze confidence='low' und nenne fehlende Felder."
output_schema: "schemas/AnalysisResult.json"
prompt:
  system: |
    Du bist ein strenger, sachlicher Trading-Analyst. Liefere kurze, belastbare Erklärungen.
  user: |
    Symbol: {{symbol}} ({{timeframe}})
    Preis: {{price}}
    Indikatoren: RSI={{indicators.rsi}}, MACD={{indicators.macd.macd}}/{{indicators.macd.signal}} (hist {{indicators.macd.hist}}), 
    SMA fast/slow={{indicators.sma.fast}}/{{indicators.sma.slow}}, BB U/M/L={{indicators.bbands.upper}}/{{indicators.bbands.middle}}/{{indicators.bbands.lower}}
    Gebühren-Vorschau (EUR): {{fees_preview_eur}}
    ATR={{risk_context.atr}}, Volatilität={{risk_context.recent_volatility}}
    Strategie: {{strategy_name}}
