# Crypto Momentum Combo Strategy
#
# Kombiniert RSI + MACD für starke Momentum-Signale
# Ideal für Crypto in Trending Markets
#
# Logik:
# - Long Entry: MACD bullish crossover + RSI > 50 (aber nicht overbought)
# - Long Exit: MACD bearish crossover ODER RSI overbought
# - Momentum-basiert, folgt starken Trends
#
# Empfohlene Assets: BTC/USD, ETH/USD, SOL/USD
# Empfohlene Timeframes: 1H, 4H, 1D

name: "Crypto Momentum Combo (RSI + MACD)"
version: "1.0.0"
category: "Momentum"
author: "OrderPilot-AI"
description: |
  Momentum-Strategie die RSI und MACD kombiniert für starke Trend-Signale.
  Nutzt MACD Crossovers in Kombination mit RSI-Filtern.
  Am besten in klaren Trending Markets.

# Asset-Klasse
asset_class: crypto
recommended_symbols:
  - "BTC/USD"
  - "ETH/USD"
  - "SOL/USD"
  - "AVAX/USD"
  - "MATIC/USD"

# Zeitrahmen
recommended_timeframes:
  - "1H"
  - "4H"
  - "1D"

# Indikatoren
indicators:
  # MACD (12, 26, 9)
  - type: MACD
    alias: macd
    params:
      fast: 12
      slow: 26
      signal: 9
    source: close
    plot: true

  # RSI (14)
  - type: RSI
    alias: rsi
    params:
      period: 14
    source: close
    plot: true

  # EMA 50 für Trendfilter
  - type: EMA
    alias: ema_50
    params:
      period: 50
    source: close
    plot: true

  # EMA 200 für langfristigen Trend
  - type: EMA
    alias: ema_200
    params:
      period: 200
    source: close
    plot: true

  # Volume SMA for Volume Spike
  - type: SMA
    alias: vol_sma
    params:
      period: 20
    source: volume
    plot: false

  # ATR für Volatility-basierte Stops
  - type: ATR
    alias: atr
    params:
      period: 14
    plot: true

# Entry Long: MACD bullish crossover + RSI 55-65 + Preis über EMA50 + Volume
entry_long:
  type: composite
  operator: AND
  conditions:
    # MACD Histogram wird positiv (Crossover)
    - type: condition
      left: "macd.histogram"
      operator: crosses_above
      right: 0
      description: "MACD bullish crossover (Histogram crosses above 0)"

    # RSI ist positiv (Engerer Threshold)
    - type: condition
      left: rsi
      operator: ">"
      right: 55
      description: "RSI zeigt starkes Momentum (> 55)"

    - type: condition
      left: rsi
      operator: "<"
      right: 65
      description: "RSI ist nicht overbought (< 65) - Sweet Spot"

    # Trendfilter: Preis über EMA 50
    - type: condition
      left: close
      operator: ">"
      right: ema_50
      description: "Preis ist über EMA 50 (Uptrend)"

    # Volume Filter
    - type: condition
      left: volume
      operator: ">"
      right: vol_sma
      description: "Volume über Durchschnitt"

    # Optional: Langfristiger Trend positiv
    - type: condition
      left: ema_50
      operator: ">"
      right: ema_200
      description: "EMA 50 über EMA 200 (Golden Cross Setup)"

# Exit Long: MACD bearish crossover ODER RSI overbought
exit_long:
  type: composite
  operator: OR
  conditions:
    # MACD Histogram wird negativ
    - type: condition
      left: "macd.histogram"
      operator: crosses_below
      right: 0
      description: "MACD bearish crossover (Momentum dreht)"

    # RSI Overbought Exit
    - type: condition
      left: rsi
      operator: ">"
      right: 80
      description: "RSI extrem overbought (> 80)"

    # Preis fällt unter EMA 50
    - type: condition
      left: close
      operator: crosses_below
      right: ema_50
      description: "Preis fällt unter EMA 50 (Trend bricht)"

# Entry Short: MACD bearish crossover + RSI 30-50 + Preis unter EMA50
entry_short:
  type: composite
  operator: AND
  conditions:
    # MACD Histogram wird negativ
    - type: condition
      left: "macd.histogram"
      operator: crosses_below
      right: 0
      description: "MACD bearish crossover"

    # RSI ist negativ aber nicht oversold
    - type: condition
      left: rsi
      operator: "<"
      right: 50
      description: "RSI zeigt negatives Momentum (< 50)"

    - type: condition
      left: rsi
      operator: ">"
      right: 30
      description: "RSI ist nicht oversold (> 30)"

    # Trendfilter: Preis unter EMA 50
    - type: condition
      left: close
      operator: "<"
      right: ema_50
      description: "Preis ist unter EMA 50 (Downtrend)"

    # Optional: Langfristiger Trend negativ
    - type: condition
      left: ema_50
      operator: "<"
      right: ema_200
      description: "EMA 50 unter EMA 200 (Death Cross Setup)"

# Exit Short: MACD bullish crossover ODER RSI oversold
exit_short:
  type: composite
  operator: OR
  conditions:
    # MACD Histogram wird positiv
    - type: condition
      left: "macd.histogram"
      operator: crosses_above
      right: 0
      description: "MACD bullish crossover"

    # RSI Oversold Exit
    - type: condition
      left: rsi
      operator: "<"
      right: 20
      description: "RSI extrem oversold (< 20)"

    # Preis steigt über EMA 50
    - type: condition
      left: close
      operator: crosses_above
      right: ema_50
      description: "Preis steigt über EMA 50"

# Risk Management
risk_management:
  # Stop Loss: ATR-basiert (2.5 * ATR)
  stop_loss_atr_multiplier: 2.5

  # Take Profit: ATR-basiert (5 * ATR) für 2:1 R/R
  take_profit_atr_multiplier: 5.0

  # Fallback Fixed Stop Loss wenn ATR nicht verfügbar
  stop_loss_pct: 4.0
  take_profit_pct: 8.0

  # Position Size: 12%
  position_size_pct: 12.0

  # Trailing Stop: Aktiviert nach 5% Gewinn
  trailing_stop_enabled: true
  trailing_stop_trigger_pct: 5.0
  trailing_stop_distance_pct: 3.0

# Backtest-Parameter
backtest:
  initial_capital: 10000
  commission: 0.001  # 0.1%
  slippage: 0.0005

# Hinweise
notes: |
  **Momentum Combo Strategie:**

  Diese Strategie kombiniert zwei der beliebtesten Momentum-Indikatoren:
  - **MACD**: Für Trend-Direction und Crossover-Signale
  - **RSI**: Für Momentum-Stärke und Overbought/Oversold Filter

  **Vorteile:**
  - Starke Signale durch Kombination zweier Indikatoren
  - Trendfilter (EMA 50/200) verhindert Counter-Trend Trades
  - ATR-basierte Stops passen sich an Volatilität an
  - Gut geeignet für Trending Crypto Markets

  **Nachteile:**
  - Kann in Sideways Markets viele Whipsaws produzieren
  - Späte Entry-Signale (Trend muss bereits etabliert sein)
  - Mehrere Filter = weniger Trades insgesamt

  **Optimale Marktbedingungen:**
  - Klare Trends (Up oder Down)
  - Mittlere bis hohe Volatilität
  - Liquidität (große Crypto-Paare bevorzugt)

  **Wann NICHT verwenden:**
  - In Range-bound Markets (Sideways)
  - Bei niedriger Volatilität
  - Während Major News Events (unvorhersehbare Moves)

  **Optimierungsvorschläge:**
  - MACD Fast: 8-15 (Standard: 12)
  - MACD Slow: 21-30 (Standard: 26)
  - MACD Signal: 7-12 (Standard: 9)
  - RSI Period: 10-20 (Standard: 14)
  - RSI Entry Range: 45-75 für Long (Standard: 50-70)
  - EMA 50: 40-60 (Standard: 50)
  - EMA 200: 150-250 (Standard: 200)

  **Backtest-Tipps:**
  - Teste verschiedene Crypto-Paare separat
  - Vergleiche Performance in Bull vs Bear Markets
  - Achte auf Maximum Drawdown
  - Optimiere für Sharpe Ratio, nicht nur Total Return
