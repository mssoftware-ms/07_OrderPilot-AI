{"number":1,"title":"Log-Systemanalysefenster","state":"closed","description":"Wir brauchen fuer die Analyse in dem Hauptfenster unter AI-Analyse das Pop-up, was sich dann oeffnet, da muessen alle Aktionen in einer eigenen Logdatei gespeichert werden und die heisst dann Analyse.log. In der Logdatei sollen dann alle Aktionen gespeichert werden, die in der kompletten AI-Analyse durchgefuehrt werden.In allen Tabs.","expected":"Ich moechte in der Logdatei jeden Schritt nachvollziehen koennen, was die Analyse-Datei durchfuehrt und welche Ergebnisse dabei rausgekommen sind oder Fehler. Auch welche Datensaetze benutzt werden, zum Beispiel ob das historische Daten dann von Alpaca sind oder wo die herkommen. Und auch ob es Fake-Sachen sind oder Platzhalter oder sowas. Damit ich genau nachvollziehen kann, was da passiert.","steps":"","additional":"Successfully implemented comprehensive logging system for AI Analysis. New Analyse.log file created in logs/ directory with JSON-formatted structured logging.\n\nImplementation Details:\n- Dedicated 'ai_analysis' logger configured with rotating file handler (10MB max, 10 backups)\n- Logs ALL actions across all AI Analysis tabs (Overview, Strategy, Timeframes, Indicators, Deep Run)\n- Tracks data sources (ALPACA, BITUNIX, etc.) and data types (HISTORICAL, PLACEHOLDER, FAKE)\n- Captures analysis steps: validation, regime detection, feature engineering, AI API calls\n- Records results, errors with full context including symbol, timeframe, tab name\n- Structured logging with extra fields for filtering and analysis\n\nFiles modified:\n1. src/common/logging_setup.py - Added ai_analysis logger configuration\n2. src/core/ai_analysis/engine.py - Enhanced logging throughout analysis pipeline\n3. src/ui/ai_analysis_window.py - Added logging for worker and UI actions\n4. src/ui/widgets/analysis_tabs/strategy_tab.py - Strategy selection and regime logging\n5. src/ui/widgets/analysis_tabs/deep_run_tab.py - Deep analysis execution logging\n\nLog file location: logs/Analyse.log\nFormat: JSON (one entry per line)\nRotation: Automatic at 10MB\nBackups: 10 previous versions retained","labels":["enhancement","logging","completed"],"comments":[{"author":"Claude Code Hive Mind","body":"✅ IMPLEMENTATION COMPLETE\n\nCreated comprehensive logging system for AI Analysis with the following features:\n\n**Logger Configuration:**\n- Dedicated logger: logging.getLogger('ai_analysis')\n- Output file: logs/Analyse.log\n- Format: JSON with structured fields\n- Rotation: 10MB max size, 10 backup files\n- Level: INFO (captures all important actions)\n\n**Logged Information:**\n\n1. **Overview Tab:**\n   - Analysis start with symbol, timeframe, model, provider\n   - Data request details (asset_class, data_source)\n   - Data fetch results (bars_count, data_source_used, data_type)\n   - Analysis completion or errors\n\n2. **Strategy Tab:**\n   - Strategy selection (strategy_name, allowed_regimes)\n   - Regime changes (regime value)\n   - Gating checks (compatibility validation)\n   - Auto-configuration applications\n\n3. **Deep Run Tab:**\n   - Deep analysis start (regime, strategy)\n   - Workflow status updates\n   - Analysis completion (report_length)\n   - Error handling\n\n4. **Analysis Engine:**\n   - Data validation (pass/fail with details)\n   - Data cleaning (bars count)\n   - Regime detection (detected regime)\n   - Feature engineering (technicals count)\n   - Prompt composition (lengths)\n   - LLM API calls (model used)\n   - Complete analysis results\n\n**Data Source Tracking:**\nAll logs include 'data_source' field indicating:\n- ALPACA (stocks)\n- ALPACA_CRYPTO (cryptocurrency)\n- BITUNIX (futures)\n- YAHOO, FINNHUB, etc.\n\n**Data Type Classification:**\nLogs distinguish between:\n- HISTORICAL: Real market data\n- PLACEHOLDER: Simulated/demo data\n- FAKE: Test data\n- UNKNOWN: Cannot determine\n\n**Sample Log Entry:**\n```json\n{\n  \"timestamp\": \"2026-01-06T23:45:30.123456\",\n  \"level\": \"INFO\",\n  \"name\": \"ai_analysis\",\n  \"message\": \"Starting analysis from UI\",\n  \"tab\": \"overview\",\n  \"action\": \"start_analysis\",\n  \"symbol\": \"AAPL\",\n  \"timeframe\": \"5T\",\n  \"asset_class\": \"us_equity\",\n  \"data_source\": \"ALPACA\",\n  \"data_type\": \"HISTORICAL\",\n  \"model\": \"gpt-4-turbo\",\n  \"provider\": \"OpenAI\",\n  \"environment\": \"development\"\n}\n```\n\n**Testing:**\nTo verify the implementation:\n1. Start OrderPilot-AI application\n2. Open any chart with a symbol\n3. Click \"AI Analysis\" button\n4. Run analysis in Overview tab\n5. Check logs/Analyse.log for JSON entries\n6. Try different tabs to see tab-specific logging\n\nAll requirements fulfilled:\n✅ Separate Analyse.log file created\n✅ Logs all actions in all AI Analysis tabs\n✅ Tracks data sources (Alpaca, Bitunix, etc.)\n✅ Distinguishes real data from placeholders/fake data\n✅ Captures each analysis step with results and errors\n✅ JSON format for easy parsing and filtering\n✅ Automatic rotation to prevent disk space issues","created_at":"2026-01-06T23:55:00.000000"}],"assignees":[],"projects":[],"milestone":null,"relationship":null,"remote":null,"created_at":"2026-01-06T13:20:21.812714","updated_at":"2026-01-06T23:55:00.000000"}
