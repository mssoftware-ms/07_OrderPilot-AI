<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrderPilot-AI Tradingbot - Benutzerhandbuch</title>
    <style>
        :root {
            --primary: #2196f3;
            --primary-dark: #1976d2;
            --success: #26a69a;
            --danger: #ef5350;
            --warning: #ff9800;
            --info: #29b6f6;
            --bg-dark: #1e1e1e;
            --bg-card: #2d2d2d;
            --text: #e0e0e0;
            --text-muted: #9e9e9e;
            --border: #404040;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }

        /* Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 20px 0;
            z-index: 100;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .sidebar-header h1 {
            font-size: 1.3em;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .sidebar-header span {
            font-size: 0.85em;
            color: var(--text-muted);
        }

        .nav-section {
            margin-bottom: 15px;
        }

        .nav-section-title {
            padding: 8px 20px;
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            font-weight: 600;
        }

        .nav-link {
            display: block;
            padding: 10px 20px;
            color: var(--text);
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: rgba(33, 150, 243, 0.1);
            border-left-color: var(--primary);
        }

        .nav-link.active {
            background: rgba(33, 150, 243, 0.15);
            border-left-color: var(--primary);
            color: var(--primary);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            padding: 40px 60px;
            max-width: 1000px;
        }

        h1, h2, h3, h4 {
            color: var(--text);
            margin-bottom: 15px;
        }

        h1 {
            font-size: 2.2em;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        h2 {
            font-size: 1.6em;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        h3 {
            font-size: 1.3em;
            color: var(--primary);
            margin-top: 30px;
        }

        h4 {
            font-size: 1.1em;
            color: var(--text-muted);
            margin-top: 20px;
        }

        p {
            margin-bottom: 15px;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .card-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Alert Boxes */
        .alert {
            padding: 15px 20px;
            border-radius: 6px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert-warning {
            background: rgba(255, 152, 0, 0.1);
            border-color: var(--warning);
        }

        .alert-danger {
            background: rgba(239, 83, 80, 0.1);
            border-color: var(--danger);
        }

        .alert-info {
            background: rgba(41, 182, 246, 0.1);
            border-color: var(--info);
        }

        .alert-success {
            background: rgba(38, 166, 154, 0.1);
            border-color: var(--success);
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Collapsible Sections */
        .collapsible {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
        }

        .collapsible-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
        }

        .collapsible-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .collapsible-header h4 {
            margin: 0;
            color: var(--text);
        }

        .collapsible-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }

        .collapsible.open .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            border-top: 1px solid var(--border);
        }

        .collapsible.open .collapsible-content {
            max-height: 2000px;
        }

        .collapsible-body {
            padding: 20px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: rgba(33, 150, 243, 0.1);
            font-weight: 600;
            color: var(--primary);
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        /* Code */
        code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #f8f8f2;
        }

        pre {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
            padding: 0;
        }

        /* Lists */
        ul, ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin: 8px 0;
        }

        /* Step-by-step */
        .steps {
            counter-reset: step-counter;
            list-style: none;
            margin-left: 0;
        }

        .steps li {
            counter-increment: step-counter;
            padding: 20px 20px 20px 70px;
            position: relative;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            margin: 15px 0;
        }

        .steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 35px;
            height: 35px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .steps li strong {
            display: block;
            margin-bottom: 5px;
            color: var(--primary);
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .badge-success { background: var(--success); color: white; }
        .badge-warning { background: var(--warning); color: black; }
        .badge-danger { background: var(--danger); color: white; }
        .badge-info { background: var(--info); color: white; }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .feature-icon {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .feature-card h4 {
            margin: 0 0 10px 0;
            color: var(--text);
        }

        .feature-card p {
            color: var(--text-muted);
            font-size: 0.9em;
            margin: 0;
        }

        /* Interactive Demo */
        .demo-box {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .demo-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.2s;
        }

        .demo-btn-primary {
            background: var(--primary);
            color: white;
        }

        .demo-btn-success {
            background: var(--success);
            color: white;
        }

        .demo-btn-danger {
            background: var(--danger);
            color: white;
        }

        .demo-btn:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
        }

        .demo-output {
            background: #0d0d0d;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            min-height: 100px;
        }

        /* Glossary */
        .glossary-term {
            cursor: help;
            border-bottom: 1px dotted var(--primary);
            color: var(--primary);
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 300px;
            background: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 15px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
            line-height: 1.5;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Print styles */
        @media print {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
        }

        /* Mobile */
        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            .sidebar.open {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            .menu-toggle {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 200;
                background: var(--primary);
                color: white;
                border: none;
                padding: 10px 15px;
                border-radius: 6px;
                cursor: pointer;
            }
        }

        /* Scroll to top */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 1.5em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .scroll-top.visible {
            opacity: 1;
        }

        .scroll-top:hover {
            transform: scale(1.1);
        }

        /* Section anchors */
        section {
            scroll-margin-top: 20px;
        }

        /* Keyboard shortcuts */
        kbd {
            background: #333;
            border: 1px solid #555;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: monospace;
            font-size: 0.85em;
        }
    </style>
</head>
<body>
    <button class="menu-toggle" onclick="toggleSidebar()" style="display: none;">‚ò∞ Men√º</button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>üìä OrderPilot-AI</h1>
            <span>Tradingbot Handbuch v1.0</span>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Erste Schritte</div>
            <a href="#einfuehrung" class="nav-link">Einf√ºhrung</a>
            <a href="#schnellstart" class="nav-link">Schnellstart</a>
            <a href="#sicherheit" class="nav-link">Sicherheitshinweise</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Bot Control Tab</div>
            <a href="#bot-starten" class="nav-link">Bot starten/stoppen</a>
            <a href="#ki-modus" class="nav-link">KI-Modus</a>
            <a href="#trailing-modus" class="nav-link">Trailing-Modus</a>
            <a href="#risiko-einstellungen" class="nav-link">Risiko-Einstellungen</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Daily Strategy Tab</div>
            <a href="#strategie-auswahl" class="nav-link">Strategie-Auswahl</a>
            <a href="#regime-erkennung" class="nav-link">Regime-Erkennung</a>
            <a href="#walk-forward" class="nav-link">Walk-Forward Analyse</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Signals Tab</div>
            <a href="#position-anzeige" class="nav-link">Position anzeigen</a>
            <a href="#signale" class="nav-link">Entry-Signale</a>
            <a href="#stop-historie" class="nav-link">Stop-Historie</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">KI Logs Tab</div>
            <a href="#ki-status" class="nav-link">KI Status</a>
            <a href="#ki-protokoll" class="nav-link">KI Protokoll</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Chart-Overlay</div>
            <a href="#marker" class="nav-link">Entry Marker</a>
            <a href="#stop-linien" class="nav-link">Stop-Linien</a>
            <a href="#debug-hud" class="nav-link">Debug HUD</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Referenz</div>
            <a href="#glossar" class="nav-link">Glossar</a>
            <a href="#faq" class="nav-link">FAQ</a>
            <a href="#fehlerbehebung" class="nav-link">Fehlerbehebung</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- ==================== EINF√úHRUNG ==================== -->
        <section id="einfuehrung">
            <h1>üìä OrderPilot-AI Tradingbot</h1>

            <div class="alert alert-warning">
                <div class="alert-title">‚ö†Ô∏è WICHTIGER RISIKOHINWEIS</div>
                <p><strong>Automatisierter Handel birgt erhebliche finanzielle Risiken!</strong></p>
                <ul>
                    <li>Vergangene Performance garantiert keine zuk√ºnftigen Ergebnisse</li>
                    <li>Handeln Sie nur mit Kapital, dessen Verlust Sie verkraften k√∂nnen</li>
                    <li>Diese Software ist <strong>KEINE</strong> Anlageberatung</li>
                    <li>Testen Sie <strong>IMMER</strong> zuerst im Paper-Modus!</li>
                </ul>
            </div>

            <p>Willkommen zum OrderPilot-AI Tradingbot! Diese Anleitung hilft Ihnen, den Bot sicher und effektiv zu nutzen.</p>

            <h3>Was macht der Tradingbot?</h3>
            <p>Der Tradingbot analysiert automatisch Marktdaten und findet optimale Ein- und Ausstiegspunkte f√ºr Ihre Trades. Er arbeitet nach einem <strong>regelbasierten System</strong> und kann optional durch <strong>KI-Unterst√ºtzung</strong> (OpenAI) erg√§nzt werden.</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h4>Entry-Signale</h4>
                    <p>Automatische Erkennung von Long- und Short-Einstiegspunkten basierend auf technischen Indikatoren.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h4>Dynamisches Stop-Management</h4>
                    <p>Kein fixer Take-Profit! Der Bot passt den Stop-Loss dynamisch an, um Gewinne zu sichern.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìà</div>
                    <h4>T√§gliche Strategie-Auswahl</h4>
                    <p>Jeden Tag w√§hlt der Bot die beste Strategie basierend auf aktuellen Marktbedingungen.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h4>Optionale KI-Unterst√ºtzung</h4>
                    <p>OpenAI-Integration f√ºr verbesserte Entscheidungen - mit strikten Sicherheits-Guardrails.</p>
                </div>
            </div>

            <h3>Kernkonzept: Kein fixer Take-Profit</h3>
            <p>Im Gegensatz zu traditionellen Bots verwendet OrderPilot-AI <strong>keinen festen Take-Profit</strong>. Stattdessen:</p>
            <ul>
                <li><strong>Initial Stop-Loss</strong> ist der <em>einzige</em> fixe Wert (in % vom Entry)</li>
                <li>Der Bot entscheidet dynamisch zwischen: <span class="badge badge-success">HOLD</span> <span class="badge badge-warning">ADJUST_STOP</span> <span class="badge badge-danger">EXIT</span></li>
                <li>Das Stop-Loss wird <em>nachgezogen</em> (Trailing), um Gewinne zu sichern</li>
            </ul>
        </section>

        <!-- ==================== SCHNELLSTART ==================== -->
        <section id="schnellstart">
            <h2>üöÄ Schnellstart</h2>

            <p>Folgen Sie diesen Schritten, um den Bot zum ersten Mal zu starten:</p>

            <ol class="steps">
                <li>
                    <strong>Chart √∂ffnen</strong>
                    √ñffnen Sie ein Chart-Fenster f√ºr das gew√ºnschte Symbol (z.B. AAPL, BTC/USD). Der Bot arbeitet immer mit dem aktuell angezeigten Symbol.
                </li>
                <li>
                    <strong>Analyse & Strategy Panel √∂ffnen</strong>
                    Klicken Sie auf den "Panel" Button in der Chart-Toolbar oder nutzen Sie die Tastenkombination. Das Panel erscheint am unteren Rand.
                </li>
                <li>
                    <strong>Bot Tab ausw√§hlen</strong>
                    Klicken Sie auf den Tab "Bot" im Panel. Hier finden Sie alle Steuerungselemente f√ºr den Tradingbot.
                </li>
                <li>
                    <strong>Einstellungen pr√ºfen</strong>
                    √úberpr√ºfen Sie die Standard-Einstellungen:
                    <ul>
                        <li>KI Mode: <code>NO_KI</code> (empfohlen f√ºr den Start)</li>
                        <li>Trailing Mode: <code>PCT</code> oder <code>ATR</code></li>
                        <li>Initial SL: <code>2.0%</code></li>
                        <li>Risk/Trade: <code>1.0%</code></li>
                    </ul>
                </li>
                <li>
                    <strong>Bot starten</strong>
                    Klicken Sie auf den gr√ºnen <span class="badge badge-success">Start Bot</span> Button. Der Status wechselt zu "RUNNING".
                </li>
                <li>
                    <strong>Signale beobachten</strong>
                    Der Bot analysiert nun jede neue Kerze und zeigt Entry-Signale im Chart an. Beobachten Sie die Aktivit√§t im "Signals" Tab.
                </li>
            </ol>

            <div class="alert alert-info">
                <div class="alert-title">üí° Tipp: Paper-Modus verwenden</div>
                <p>Stellen Sie sicher, dass Sie im <strong>Paper-Modus</strong> arbeiten, bevor Sie echtes Geld riskieren! √úberpr√ºfen Sie die Umgebungsvariable <code>TRADING_ENV=paper</code> in Ihren Einstellungen.</p>
            </div>
        </section>

        <!-- ==================== SICHERHEIT ==================== -->
        <section id="sicherheit">
            <h2>üõ°Ô∏è Sicherheitshinweise</h2>

            <div class="card">
                <div class="card-title">‚ö†Ô∏è Wichtige Sicherheitsregeln</div>

                <h4>1. Immer im Paper-Modus testen</h4>
                <p>Bevor Sie mit echtem Geld handeln, sollten Sie den Bot <strong>mindestens 2-4 Wochen</strong> im Paper-Modus testen. Beobachten Sie:</p>
                <ul>
                    <li>Wie reagiert der Bot auf verschiedene Marktbedingungen?</li>
                    <li>Stimmen die Signale mit Ihrer Erwartung √ºberein?</li>
                    <li>Wie hoch ist der Drawdown?</li>
                </ul>

                <h4>2. Risikogrenzen einhalten</h4>
                <table>
                    <tr>
                        <th>Einstellung</th>
                        <th>Konservativ</th>
                        <th>Moderat</th>
                        <th>Aggressiv</th>
                    </tr>
                    <tr>
                        <td>Risk/Trade %</td>
                        <td>0.5%</td>
                        <td>1.0%</td>
                        <td>2.0%</td>
                    </tr>
                    <tr>
                        <td>Max Daily Loss %</td>
                        <td>2.0%</td>
                        <td>5.0%</td>
                        <td>8.0%</td>
                    </tr>
                    <tr>
                        <td>Max Trades/Tag</td>
                        <td>3</td>
                        <td>5</td>
                        <td>10</td>
                    </tr>
                </table>

                <h4>3. Niemals "Never Loosen Stop" umgehen</h4>
                <p>Der Bot hat eine eingebaute Regel: <strong>Der Stop-Loss wird niemals nach unten (Long) oder nach oben (Short) verschoben!</strong> Diese Regel sch√ºtzt Sie vor gr√∂√üeren Verlusten.</p>

                <h4>4. KI-Modus verstehen</h4>
                <p>Die KI gibt <em>Empfehlungen</em>, aber die <strong>Regellogik + Guardrails entscheiden final</strong>. Die KI ist kein "Buy/Sell-Orakel"!</p>
            </div>
        </section>

        <!-- ==================== BOT CONTROL TAB ==================== -->
        <section id="bot-starten">
            <h2>üéÆ Bot Control Tab</h2>

            <h3>Bot starten und stoppen</h3>

            <p>Der Bot Control Tab ist Ihre zentrale Steuerungseinheit. Hier finden Sie:</p>

            <div class="collapsible open">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Start/Stop/Pause Buttons</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <table>
                            <tr>
                                <th>Button</th>
                                <th>Farbe</th>
                                <th>Funktion</th>
                            </tr>
                            <tr>
                                <td><strong>Start Bot</strong></td>
                                <td><span class="badge badge-success">Gr√ºn</span></td>
                                <td>Startet den Bot mit den aktuellen Einstellungen. Der Bot beginnt sofort, Kerzen zu analysieren.</td>
                            </tr>
                            <tr>
                                <td><strong>Stop Bot</strong></td>
                                <td><span class="badge badge-danger">Rot</span></td>
                                <td>Stoppt den Bot vollst√§ndig. Offene Positionen werden <em>nicht</em> automatisch geschlossen!</td>
                            </tr>
                            <tr>
                                <td><strong>Pause</strong></td>
                                <td><span class="badge badge-warning">Grau</span></td>
                                <td>Pausiert die Analyse. N√ºtzlich w√§hrend wichtiger News oder manueller Eingriffe.</td>
                            </tr>
                        </table>

                        <div class="alert alert-warning">
                            <div class="alert-title">‚ö†Ô∏è Wichtig</div>
                            <p>Wenn Sie den Bot stoppen, bleiben offene Positionen bestehen! Schlie√üen Sie diese manuell oder lassen Sie den Bot weiterlaufen, bis er die Position selbst schlie√üt.</p>
                        </div>
                    </div>
                </div>
            </div>

            <h4>Status-Anzeige</h4>
            <p>√úber den Buttons sehen Sie den aktuellen Bot-Status:</p>
            <ul>
                <li><span class="badge" style="background:#607d8b;color:white">STOPPED</span> - Bot ist nicht aktiv</li>
                <li><span class="badge badge-success">RUNNING</span> - Bot analysiert aktiv</li>
                <li><span class="badge" style="background:#ffeb3b;color:black">SIGNAL</span> - Entry-Signal erkannt</li>
                <li><span class="badge" style="background:#2196f3;color:white">MANAGE</span> - Position wird verwaltet</li>
                <li><span class="badge badge-warning">PAUSED</span> - Bot ist pausiert</li>
                <li><span class="badge badge-danger">ERROR</span> - Ein Fehler ist aufgetreten</li>
            </ul>
        </section>

        <!-- ==================== KI-MODUS ==================== -->
        <section id="ki-modus">
            <h3>ü§ñ KI-Modus</h3>

            <p>Der KI-Modus bestimmt, wie stark die OpenAI-Integration genutzt wird:</p>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>NO_KI - Rein regelbasiert (Empfohlen f√ºr Anf√§nger)</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>Keine KI-Calls.</strong> Der Bot arbeitet ausschlie√ülich mit technischen Indikatoren und vordefinierten Regeln.</p>
                        <p><strong>Vorteile:</strong></p>
                        <ul>
                            <li>‚úÖ Vorhersagbares Verhalten</li>
                            <li>‚úÖ Keine API-Kosten</li>
                            <li>‚úÖ Schnelle Entscheidungen</li>
                            <li>‚úÖ Kein Internet f√ºr KI erforderlich</li>
                        </ul>
                        <p><strong>Empfohlen f√ºr:</strong> Einsteiger, Tests, niedrige Latenz</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>LOW_KI - T√§gliche Strategie-Auswahl</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>1 KI-Call pro Tag</strong> f√ºr die Strategie-Auswahl am Tagesbeginn.</p>
                        <p>Die KI analysiert die Marktbedingungen und gibt eine "Second Opinion" zur besten Tagesstrategie ab.</p>
                        <p><strong>Vorteile:</strong></p>
                        <ul>
                            <li>‚úÖ Bessere Strategie-Auswahl</li>
                            <li>‚úÖ Geringe Kosten (~0.01-0.05‚Ç¨/Tag)</li>
                            <li>‚úÖ Menschliche Intelligenz f√ºr Big-Picture</li>
                        </ul>
                        <p><strong>Empfohlen f√ºr:</strong> Fortgeschrittene mit OpenAI-Account</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>FULL_KI - Intraday Events</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>Mehrere KI-Calls pro Tag</strong> bei kritischen Events:</p>
                        <ul>
                            <li>üîÑ Regime-Wechsel (Trend ‚Üí Range)</li>
                            <li>‚ö†Ô∏è Exit-Kandidaten</li>
                            <li>üìä Signifikante Signal-√Ñnderungen</li>
                        </ul>
                        <p><strong>Vorteile:</strong></p>
                        <ul>
                            <li>‚úÖ Optimierte Intraday-Entscheidungen</li>
                            <li>‚úÖ KI-gest√ºtzte Exit-Timing</li>
                        </ul>
                        <p><strong>Nachteile:</strong></p>
                        <ul>
                            <li>‚ùå H√∂here Kosten (~0.50-2.00‚Ç¨/Tag)</li>
                            <li>‚ùå Latenz durch API-Calls</li>
                        </ul>
                        <p><strong>Empfohlen f√ºr:</strong> Erfahrene Trader mit Budget f√ºr KI</p>
                    </div>
                </div>
            </div>

            <div class="alert alert-info">
                <div class="alert-title">üí° Tipp</div>
                <p>Starten Sie immer mit <code>NO_KI</code>, um das Grundverhalten des Bots zu verstehen. Wechseln Sie erst zu KI-Modi, wenn Sie mit dem regelbasierten System vertraut sind.</p>
            </div>
        </section>

        <!-- ==================== TRAILING MODUS ==================== -->
        <section id="trailing-modus">
            <h3>üìâ Trailing-Modus</h3>

            <p>Der Trailing-Modus bestimmt, wie der Stop-Loss nachgezogen wird:</p>

            <table>
                <tr>
                    <th>Modus</th>
                    <th>Beschreibung</th>
                    <th>Beste f√ºr</th>
                </tr>
                <tr>
                    <td><strong>PCT</strong></td>
                    <td>Fester Prozent-Abstand vom H√∂chst-/Tiefstpreis (z.B. 2% unter Hoch bei Long)</td>
                    <td>Stabile M√§rkte, Aktien</td>
                </tr>
                <tr>
                    <td><strong>ATR</strong></td>
                    <td>Volatilit√§ts-basiert (ATR-Multiple). Passt sich automatisch an Marktbewegungen an.</td>
                    <td>Volatile M√§rkte, Crypto</td>
                </tr>
                <tr>
                    <td><strong>SWING</strong></td>
                    <td>Basiert auf Bollinger Bands als Support/Resistance</td>
                    <td>Range-M√§rkte, Mean Reversion</td>
                </tr>
            </table>

            <div class="demo-box">
                <h4>üìä Trailing-Stop Visualisierung</h4>
                <div class="demo-controls">
                    <button class="demo-btn demo-btn-primary" onclick="showTrailingExample('pct')">PCT-Trailing</button>
                    <button class="demo-btn demo-btn-success" onclick="showTrailingExample('atr')">ATR-Trailing</button>
                    <button class="demo-btn demo-btn-danger" onclick="showTrailingExample('swing')">SWING-Trailing</button>
                </div>
                <div class="demo-output" id="trailing-demo">
                    <p>Klicken Sie auf einen Button, um ein Beispiel zu sehen...</p>
                </div>
            </div>
        </section>

        <!-- ==================== RISIKO EINSTELLUNGEN ==================== -->
        <section id="risiko-einstellungen">
            <h3>‚öñÔ∏è Risiko-Einstellungen</h3>

            <div class="card">
                <div class="card-title">Initial SL % (Stop-Loss)</div>
                <p>Der <strong>einzige fixe Parameter</strong> des Systems!</p>
                <p>Bestimmt, wie weit der initiale Stop-Loss vom Entry-Preis entfernt ist.</p>
                <table>
                    <tr>
                        <th>Asset-Klasse</th>
                        <th>Empfohlener Bereich</th>
                    </tr>
                    <tr>
                        <td>Aktien (NASDAQ)</td>
                        <td>1.5% - 3.0%</td>
                    </tr>
                    <tr>
                        <td>Crypto (BTC, ETH)</td>
                        <td>2.0% - 5.0%</td>
                    </tr>
                    <tr>
                        <td>Altcoins</td>
                        <td>3.0% - 8.0%</td>
                    </tr>
                </table>
            </div>

            <div class="card">
                <div class="card-title">Risk/Trade % (Position Sizing)</div>
                <p>Maximales Risiko pro Trade in Prozent des Kontostands.</p>
                <p><strong>Beispiel:</strong> Bei 10.000‚Ç¨ Kontostand und 1% Risk/Trade riskieren Sie maximal 100‚Ç¨ pro Trade.</p>
                <p>Die <strong>Positionsgr√∂√üe</strong> wird automatisch berechnet:</p>
                <pre><code>Position = (Kontostand √ó Risk%) / (Entry-Preis √ó SL%)

Beispiel:
- Kontostand: 10.000‚Ç¨
- Risk/Trade: 1% = 100‚Ç¨
- Entry: 150‚Ç¨
- SL: 2% = 3‚Ç¨
- Position: 100‚Ç¨ / 3‚Ç¨ = 33 Aktien</code></pre>
            </div>

            <div class="card">
                <div class="card-title">Max Trades/Tag</div>
                <p>Begrenzt die Anzahl der Trades pro Tag. Verhindert √úberhandel bei volatilen M√§rkten.</p>
                <ul>
                    <li>Konservativ: 3 Trades</li>
                    <li>Moderat: 5-8 Trades</li>
                    <li>Aggressiv: 10-15 Trades</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-title">Max Daily Loss %</div>
                <p>Der Bot stoppt automatisch, wenn der t√§gliche Verlust diesen Wert erreicht.</p>
                <p><strong>Wichtig:</strong> Dies ist ein Schutz vor "Tilting" - emotionalem √úberhandeln nach Verlusten.</p>
            </div>
        </section>

        <!-- ==================== STRATEGIE TAB ==================== -->
        <section id="strategie-auswahl">
            <h2>üìä Daily Strategy Tab</h2>

            <h3>Verf√ºgbare Strategien</h3>

            <p>Der Bot w√§hlt t√§glich die beste Strategie basierend auf den aktuellen Marktbedingungen:</p>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Trend-Following (Konservativ/Aggressiv)</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>Funktionsweise:</strong> Folgt dem etablierten Trend. Kauft bei R√ºcksetzern im Aufw√§rtstrend, verkauft bei Rallyes im Abw√§rtstrend.</p>
                        <p><strong>Indikatoren:</strong> ADX > 25, MA-Slope positiv/negativ, RSI-Best√§tigung</p>
                        <p><strong>Beste Marktbedingung:</strong> Klare Trends (TREND_UP, TREND_DOWN)</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Mean-Reversion (BB/RSI)</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>Funktionsweise:</strong> Handelt gegen Extreme. Kauft bei √úberverkauft, verkauft bei √úberkauft.</p>
                        <p><strong>Indikatoren:</strong> Bollinger Band Touch, RSI < 30 oder > 70</p>
                        <p><strong>Beste Marktbedingung:</strong> Range-M√§rkte (RANGE)</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Breakout (Volatilit√§t/Momentum)</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p><strong>Funktionsweise:</strong> Handelt Ausbr√ºche aus Konsolidierungen.</p>
                        <p><strong>Indikatoren:</strong> Bollinger Band Expansion, erh√∂htes Volumen, ADX steigend</p>
                        <p><strong>Beste Marktbedingung:</strong> Niedrige Volatilit√§t vor Ausbruch</p>
                    </div>
                </div>
            </div>

            <h4>Force Re-Selection</h4>
            <p>Der Button <strong>"Force Re-Selection"</strong> erzwingt eine neue Strategie-Auswahl. Nutzen Sie dies, wenn:</p>
            <ul>
                <li>Sie glauben, dass sich die Marktbedingungen signifikant ge√§ndert haben</li>
                <li>Der Bot eine unpassende Strategie gew√§hlt hat</li>
                <li>Sie manuell eingreifen m√∂chten</li>
            </ul>
        </section>

        <!-- ==================== REGIME ERKENNUNG ==================== -->
        <section id="regime-erkennung">
            <h3>üå°Ô∏è Regime-Erkennung</h3>

            <p>Der Bot erkennt automatisch den aktuellen Markt-"Modus":</p>

            <table>
                <tr>
                    <th>Regime</th>
                    <th>Erkennung</th>
                    <th>Bot-Verhalten</th>
                </tr>
                <tr>
                    <td><span class="badge badge-success">TREND_UP</span></td>
                    <td>ADX > 25, DI+ > DI-, MA-Slope positiv</td>
                    <td>Sucht Long-Entries, weite Stops</td>
                </tr>
                <tr>
                    <td><span class="badge badge-danger">TREND_DOWN</span></td>
                    <td>ADX > 25, DI- > DI+, MA-Slope negativ</td>
                    <td>Sucht Short-Entries, weite Stops</td>
                </tr>
                <tr>
                    <td><span class="badge badge-warning">RANGE</span></td>
                    <td>ADX < 20, Preis in BB-Mitte</td>
                    <td>Mean-Reversion, enge Stops</td>
                </tr>
                <tr>
                    <td><span class="badge" style="background:#9e9e9e;color:white">UNKNOWN</span></td>
                    <td>Keine klaren Signale</td>
                    <td>Vorsichtiger, h√∂here Schwellen</td>
                </tr>
            </table>

            <h4>Volatilit√§ts-Level</h4>
            <table>
                <tr>
                    <th>Level</th>
                    <th>ATR-Verh√§ltnis</th>
                    <th>Auswirkung</th>
                </tr>
                <tr>
                    <td>LOW</td>
                    <td>< 0.5√ó Durchschnitt</td>
                    <td>Engere Stops, mehr Trades</td>
                </tr>
                <tr>
                    <td>NORMAL</td>
                    <td>0.5-1.5√ó Durchschnitt</td>
                    <td>Standard-Parameter</td>
                </tr>
                <tr>
                    <td>HIGH</td>
                    <td>1.5-2.5√ó Durchschnitt</td>
                    <td>Weitere Stops, weniger Trades</td>
                </tr>
                <tr>
                    <td>EXTREME</td>
                    <td>> 2.5√ó Durchschnitt</td>
                    <td>Sehr vorsichtig, evtl. kein Trading</td>
                </tr>
            </table>
        </section>

        <!-- ==================== SIGNALS TAB ==================== -->
        <section id="position-anzeige">
            <h2>üì° Signals Tab</h2>

            <h3>Aktuelle Position</h3>
            <p>Hier sehen Sie alle Details zur aktuellen offenen Position:</p>
            <ul>
                <li><strong>Side:</strong> LONG oder SHORT (oder FLAT wenn keine Position)</li>
                <li><strong>Entry:</strong> Einstiegspreis</li>
                <li><strong>Size:</strong> Positionsgr√∂√üe</li>
                <li><strong>Stop:</strong> Aktueller Stop-Loss-Preis</li>
                <li><strong>P&L:</strong> Unrealisierter Gewinn/Verlust</li>
                <li><strong>Bars Held:</strong> Wie viele Kerzen die Position gehalten wurde</li>
            </ul>
        </section>

        <section id="signale">
            <h3>Entry-Signale</h3>

            <p>Die Signal-Tabelle zeigt alle erkannten Entry-Signale:</p>

            <table>
                <tr>
                    <th>Spalte</th>
                    <th>Bedeutung</th>
                </tr>
                <tr>
                    <td>Time</td>
                    <td>Zeitpunkt des Signals</td>
                </tr>
                <tr>
                    <td>Type</td>
                    <td><span class="badge badge-warning">CANDIDATE</span> oder <span class="badge badge-success">CONFIRMED</span></td>
                </tr>
                <tr>
                    <td>Side</td>
                    <td>LONG oder SHORT</td>
                </tr>
                <tr>
                    <td>Score</td>
                    <td>Entry-Score (0-100). H√∂her = st√§rkeres Signal</td>
                </tr>
                <tr>
                    <td>Price</td>
                    <td>Signalpreis</td>
                </tr>
                <tr>
                    <td>Status</td>
                    <td>ACTIVE, TRIGGERED, EXPIRED</td>
                </tr>
            </table>

            <div class="alert alert-info">
                <div class="alert-title">üí° Signal-Best√§tigung</div>
                <p>Ein <span class="badge badge-warning">CANDIDATE</span> Signal wird zu <span class="badge badge-success">CONFIRMED</span>, wenn es auf der n√§chsten Kerze best√§tigt wird. Dies verhindert Fehlsignale.</p>
            </div>

            <h4>Score-Berechnung im Detail</h4>
            <p>Der <strong>Entry-Score (0-100)</strong> ist ein gewichteter Durchschnitt mehrerer technischer Indikatoren:</p>

            <table>
                <tr>
                    <th>Komponente</th>
                    <th>Gewicht</th>
                    <th>Was wird bewertet?</th>
                </tr>
                <tr>
                    <td>Trend Alignment</td>
                    <td>25%</td>
                    <td>MA-Ausrichtung (SMA 20/50/200). Best√§tigt der Trend die Trade-Richtung?</td>
                </tr>
                <tr>
                    <td>RSI Momentum</td>
                    <td>20%</td>
                    <td>RSI-Position. Long: RSI 30-50 gut, Short: RSI 50-70 gut</td>
                </tr>
                <tr>
                    <td>MACD Momentum</td>
                    <td>15%</td>
                    <td>MACD-Histogram & Signal-Line Crossover</td>
                </tr>
                <tr>
                    <td>Trend Strength</td>
                    <td>15%</td>
                    <td>ADX-St√§rke. ADX > 25 = starker Trend</td>
                </tr>
                <tr>
                    <td>Mean Reversion</td>
                    <td>10%</td>
                    <td>Bollinger Band Position. Ist Preis nahe Support/Resistance?</td>
                </tr>
                <tr>
                    <td>Volume</td>
                    <td>10%</td>
                    <td>Volumen-Ratio vs. Durchschnitt. H√∂her = besser</td>
                </tr>
                <tr>
                    <td>Regime Match</td>
                    <td>5%</td>
                    <td>Passt der Trade zur aktuellen Marktphase?</td>
                </tr>
            </table>

            <div class="card">
                <div class="card-title">üìä Score-Interpretation</div>
                <table>
                    <tr>
                        <th>Score</th>
                        <th>Bedeutung</th>
                        <th>Aktion</th>
                    </tr>
                    <tr>
                        <td><span class="badge badge-success">80-100</span></td>
                        <td>Sehr starkes Signal</td>
                        <td>Idealer Entry, alle Indikatoren best√§tigen</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-info">60-79</span></td>
                        <td>Gutes Signal</td>
                        <td>Trade m√∂glich (Minimum f√ºr Entry)</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-warning">40-59</span></td>
                        <td>Schwaches Signal</td>
                        <td>Kein Trade - zu wenig Best√§tigung</td>
                    </tr>
                    <tr>
                        <td><span class="badge badge-danger">0-39</span></td>
                        <td>Kein Signal</td>
                        <td>Definitiv kein Trade</td>
                    </tr>
                </table>
                <p style="margin-top: 15px;">Der Bot tradet nur wenn <code>Score ‚â• 60</code> (konfigurierbar via <code>min_score_threshold</code>).</p>
            </div>
        </section>

        <section id="stop-historie">
            <h3>Stop-Historie</h3>
            <p>Zeigt alle Stop-Loss-√Ñnderungen f√ºr die aktuelle Position:</p>
            <ul>
                <li><strong>Time:</strong> Wann wurde der Stop ge√§ndert</li>
                <li><strong>Old Stop:</strong> Vorheriger Stop-Preis</li>
                <li><strong>New Stop:</strong> Neuer Stop-Preis</li>
                <li><strong>Reason:</strong> Grund f√ºr die √Ñnderung (TRAILING_UPDATE, REGIME_ADJUST, etc.)</li>
            </ul>
        </section>

        <!-- ==================== KI LOGS TAB ==================== -->
        <section id="ki-status">
            <h2>ü§ñ KI Logs Tab</h2>

            <h3>KI Status</h3>
            <p>√úbersicht √ºber die KI-Nutzung:</p>
            <ul>
                <li><strong>Status:</strong> Aktiv/Inaktiv</li>
                <li><strong>Calls Today:</strong> Anzahl der heutigen API-Aufrufe</li>
                <li><strong>Last Call:</strong> Zeitpunkt des letzten Aufrufs</li>
                <li><strong>Cost Today:</strong> Gesch√§tzte Kosten heute (in USD)</li>
            </ul>
        </section>

        <section id="ki-protokoll">
            <h3>KI Protokoll</h3>
            <p>Detailliertes Log aller KI-Interaktionen:</p>
            <pre><code>[14:32:15] REQUEST: DAILY_STRATEGY
  Features: RSI=45.2, ADX=28.4, MACD=0.12
  Regime: TREND_UP, Vol: NORMAL

[14:32:16] RESPONSE:
  Action: HOLD
  Confidence: 0.72
  Reason: ["TREND_INTACT", "MOMENTUM_UP"]

[14:32:16] VALIDATION: ‚úÖ Schema valid, ranges OK</code></pre>

            <p>Der <strong>"Clear Log"</strong> Button l√∂scht das Protokoll.</p>
        </section>

        <!-- ==================== CHART OVERLAY ==================== -->
        <section id="marker">
            <h2>üìà Chart-Overlay</h2>

            <h3>Entry Marker</h3>
            <p>Im Chart werden verschiedene Marker angezeigt:</p>

            <table>
                <tr>
                    <th>Symbol</th>
                    <th>Farbe</th>
                    <th>Bedeutung</th>
                </tr>
                <tr>
                    <td>‚óã (Kreis)</td>
                    <td>Gelb/Orange</td>
                    <td>Entry Kandidat (noch nicht best√§tigt)</td>
                </tr>
                <tr>
                    <td>‚ñ≤ (Pfeil hoch)</td>
                    <td>Gr√ºn</td>
                    <td>Best√§tigter Long Entry</td>
                </tr>
                <tr>
                    <td>‚ñº (Pfeil runter)</td>
                    <td>Rot</td>
                    <td>Best√§tigter Short Entry</td>
                </tr>
                <tr>
                    <td>‚ñ† (Quadrat)</td>
                    <td>Lila</td>
                    <td>Exit Signal</td>
                </tr>
                <tr>
                    <td>‚óè (Punkt)</td>
                    <td>Rot</td>
                    <td>Stop ausgel√∂st</td>
                </tr>
            </table>
        </section>

        <section id="stop-linien">
            <h3>Stop-Linien</h3>
            <p>Horizontale Linien im Chart:</p>
            <ul>
                <li><span style="color:#2196f3">‚ñ†</span> <strong>Blau:</strong> Entry-Preis</li>
                <li><span style="color:#ff5722">‚ñ†</span> <strong>Orange-Rot:</strong> Initialer Stop-Loss</li>
                <li><span style="color:#ff9800">‚ñ†</span> <strong>Orange:</strong> Aktueller Trailing Stop</li>
            </ul>
        </section>

        <section id="debug-hud">
            <h3>Debug HUD</h3>
            <p>Aktivieren Sie "Show Debug HUD" in den Display Options, um ein Overlay oben rechts im Chart zu sehen:</p>
            <pre><code>MANAGE | R:TREND_UP | S:TrendFollow | T:ATR | KI:NO_KI | C:65%</code></pre>
            <p>Zeigt: State | Regime | Strategie | Trailing-Mode | KI-Mode | Confidence</p>
        </section>

        <!-- ==================== GLOSSAR ==================== -->
        <section id="glossar">
            <h2>üìñ Glossar</h2>

            <div class="card">
                <dl>
                    <dt><strong>ADX (Average Directional Index)</strong></dt>
                    <dd>Misst die Trendst√§rke. > 25 = starker Trend, < 20 = kein Trend (Range).</dd>

                    <dt><strong>ATR (Average True Range)</strong></dt>
                    <dd>Misst die durchschnittliche Volatilit√§t. Wird f√ºr dynamische Stop-Abst√§nde verwendet.</dd>

                    <dt><strong>Bollinger Bands (BB)</strong></dt>
                    <dd>Volatilit√§ts-Kan√§le um einen gleitenden Durchschnitt. N√ºtzlich f√ºr Mean-Reversion.</dd>

                    <dt><strong>Entry Score</strong></dt>
                    <dd>Gewichteter Durchschnitt (0-100) aus mehreren Indikatoren: Trend Alignment (25%), RSI Momentum (20%), MACD (15%), ADX Trendst√§rke (15%), Mean Reversion (10%), Volumen (10%), Regime Match (5%). Score ‚â• 60 = Trade m√∂glich.</dd>

                    <dt><strong>Guardrails</strong></dt>
                    <dd>Sicherheitsmechanismen, die KI-Empfehlungen validieren und unsichere Aktionen verhindern.</dd>

                    <dt><strong>MACD</strong></dt>
                    <dd>Moving Average Convergence Divergence. Momentum-Indikator.</dd>

                    <dt><strong>Paper Trading</strong></dt>
                    <dd>Simulation mit virtuellem Geld. Keine echten Trades werden ausgef√ºhrt.</dd>

                    <dt><strong>Regime</strong></dt>
                    <dd>Aktueller Marktzustand: TREND_UP, TREND_DOWN, RANGE, oder UNKNOWN.</dd>

                    <dt><strong>RSI (Relative Strength Index)</strong></dt>
                    <dd>Momentum-Oszillator. < 30 = √ºberverkauft, > 70 = √ºberkauft.</dd>

                    <dt><strong>Trailing Stop</strong></dt>
                    <dd>Stop-Loss, der dem Preis in Gewinnrichtung folgt, aber nie zur√ºckgeht.</dd>

                    <dt><strong>Walk-Forward Analyse</strong></dt>
                    <dd>Backtesting-Methode, die Strategien auf ungesehenen Daten testet, um √úberanpassung zu vermeiden.</dd>
                </dl>
            </div>
        </section>

        <!-- ==================== FAQ ==================== -->
        <section id="faq">
            <h2>‚ùì H√§ufige Fragen (FAQ)</h2>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Warum f√ºhrt der Bot keine Trades aus?</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p>M√∂gliche Gr√ºnde:</p>
                        <ol>
                            <li><strong>Kein Signal:</strong> Die Entry-Score-Schwelle wird nicht erreicht</li>
                            <li><strong>Filter aktiv:</strong> No-Trade-Filter blockiert (z.B. zu hohe Volatilit√§t)</li>
                            <li><strong>Max Trades erreicht:</strong> T√§gliches Limit bereits ausgesch√∂pft</li>
                            <li><strong>Daily Loss erreicht:</strong> Max Daily Loss % bereits √ºberschritten</li>
                            <li><strong>Markt geschlossen:</strong> Bei NASDAQ au√üerhalb der Handelszeiten</li>
                        </ol>
                        <p>Pr√ºfen Sie den Bot-Status und das KI-Protokoll f√ºr Details.</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Was passiert bei einem Internet-Ausfall?</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p>Der Bot kann keine neuen Daten empfangen und pausiert automatisch.</p>
                        <p><strong>Wichtig:</strong> Offene Positionen bleiben beim Broker bestehen! Ihre Stop-Loss-Orders sollten als echte Broker-Orders platziert sein.</p>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Wie kann ich eine Position manuell schlie√üen?</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p>Der Bot verwaltet nur sein eigenes Trading. F√ºr manuelle Eingriffe:</p>
                        <ol>
                            <li>Pausieren oder stoppen Sie den Bot</li>
                            <li>Schlie√üen Sie die Position √ºber die normale Trading-Oberfl√§che</li>
                            <li>Der Bot erkennt beim Neustart, dass keine Position offen ist</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div class="collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h4>Wie viel kostet die KI-Integration?</h4>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-body">
                        <p>Die Kosten h√§ngen vom KI-Modus ab:</p>
                        <table>
                            <tr>
                                <th>Modus</th>
                                <th>Gesch√§tzte Kosten/Tag</th>
                            </tr>
                            <tr>
                                <td>NO_KI</td>
                                <td>0‚Ç¨</td>
                            </tr>
                            <tr>
                                <td>LOW_KI</td>
                                <td>0.01-0.05‚Ç¨</td>
                            </tr>
                            <tr>
                                <td>FULL_KI</td>
                                <td>0.50-2.00‚Ç¨</td>
                            </tr>
                        </table>
                        <p>Sie ben√∂tigen einen eigenen OpenAI API-Key.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== FEHLERBEHEBUNG ==================== -->
        <section id="fehlerbehebung">
            <h2>üîß Fehlerbehebung</h2>

            <div class="alert alert-danger">
                <div class="alert-title">‚ùå Bot zeigt "ERROR" Status</div>
                <ol>
                    <li>Pr√ºfen Sie die Logdatei unter <code>logs/orderpilot.log</code></li>
                    <li>H√§ufige Ursachen: Netzwerkfehler, API-Limit erreicht, ung√ºltige Daten</li>
                    <li>Stoppen und starten Sie den Bot neu</li>
                </ol>
            </div>

            <div class="alert alert-warning">
                <div class="alert-title">‚ö†Ô∏è Keine Marker im Chart sichtbar</div>
                <ol>
                    <li>Pr√ºfen Sie, ob "Show Entry Markers" aktiviert ist</li>
                    <li>Der Bot muss laufen (Status: RUNNING)</li>
                    <li>Es m√ºssen Signale erkannt worden sein (pr√ºfen Sie Signals Tab)</li>
                </ol>
            </div>

            <div class="alert alert-info">
                <div class="alert-title">üí° KI-Calls schlagen fehl</div>
                <ol>
                    <li>Pr√ºfen Sie Ihren OpenAI API-Key in den Einstellungen</li>
                    <li>Pr√ºfen Sie Ihr OpenAI-Guthaben</li>
                    <li>Bei Rate-Limit: Warten Sie einige Minuten</li>
                    <li>Der Bot f√§llt automatisch auf regelbasiert zur√ºck</li>
                </ol>
            </div>
        </section>

        <footer style="margin-top: 60px; padding-top: 30px; border-top: 1px solid var(--border); text-align: center; color: var(--text-muted);">
            <p>OrderPilot-AI Tradingbot Handbuch v1.0</p>
            <p>¬© 2025 - Alle Rechte vorbehalten</p>
            <p style="margin-top: 15px; font-size: 0.9em;">
                ‚ö†Ô∏è Diese Software ist KEINE Anlageberatung. Handeln Sie verantwortungsvoll.
            </p>
        </footer>
    </main>

    <!-- Scroll to Top Button -->
    <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">‚Üë</div>

    <script>
        // Collapsible sections
        function toggleCollapsible(header) {
            const collapsible = header.parentElement;
            collapsible.classList.toggle('open');
        }

        // Sidebar toggle for mobile
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Scroll to top
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Show/hide scroll to top button
        window.addEventListener('scroll', function() {
            const scrollTop = document.getElementById('scrollTop');
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        // Active nav link
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Trailing example demo
        function showTrailingExample(mode) {
            const demo = document.getElementById('trailing-demo');
            const examples = {
                'pct': `<strong>PCT-Trailing Beispiel (Long Position):</strong>

Entry: 100‚Ç¨
Initial SL: 98‚Ç¨ (2% unter Entry)
Trailing: 2%

Preis steigt auf 105‚Ç¨:
‚Üí Neuer Stop: 102.90‚Ç¨ (2% unter 105‚Ç¨)

Preis steigt auf 110‚Ç¨:
‚Üí Neuer Stop: 107.80‚Ç¨ (2% unter 110‚Ç¨)

Preis f√§llt auf 108‚Ç¨:
‚Üí Stop bleibt bei 107.80‚Ç¨ (NIEMALS lockern!)

Preis f√§llt auf 107.50‚Ç¨:
‚Üí STOP AUSGEL√ñST bei 107.80‚Ç¨
‚Üí Gewinn: +7.80‚Ç¨ (+7.8%)`,

                'atr': `<strong>ATR-Trailing Beispiel (Long Position):</strong>

Entry: 100‚Ç¨
ATR (14): 1.50‚Ç¨
ATR-Multiple: 2.0x
Initial SL: 97‚Ç¨ (3‚Ç¨ unter Entry = 2√óATR)

Preis steigt, ATR bleibt bei 1.50‚Ç¨:
‚Üí Stop folgt mit 3‚Ç¨ Abstand

Preis bei 108‚Ç¨:
‚Üí Stop: 105‚Ç¨ (108‚Ç¨ - 3‚Ç¨)

Volatilit√§t steigt, ATR wird 2.00‚Ç¨:
‚Üí Bei n√§chstem Update: Stop-Abstand 4‚Ç¨
‚Üí Sch√ºtzt bei h√∂herer Volatilit√§t`,

                'swing': `<strong>SWING-Trailing Beispiel (Long Position):</strong>

Entry: 100‚Ç¨
Bollinger Band Lower: 98‚Ç¨
ATR-Buffer: 0.5‚Ç¨
Initial SL: 97.50‚Ç¨ (BB Lower - Buffer)

Preis steigt, BB Lower steigt auf 101‚Ç¨:
‚Üí Neuer Stop: 100.50‚Ç¨ (101‚Ç¨ - 0.5‚Ç¨)

Preis konsolidiert, BB Lower bei 103‚Ç¨:
‚Üí Stop: 102.50‚Ç¨

Vorteil: Stop orientiert sich an
statistischer Support-Zone`
            };

            demo.innerHTML = '<pre style="margin:0;white-space:pre-wrap;">' + examples[mode] + '</pre>';
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
                // Close mobile sidebar after click
                document.getElementById('sidebar').classList.remove('open');
            });
        });

        // Check for mobile
        if (window.innerWidth <= 900) {
            document.querySelector('.menu-toggle').style.display = 'block';
        }
        window.addEventListener('resize', function() {
            document.querySelector('.menu-toggle').style.display =
                window.innerWidth <= 900 ? 'block' : 'none';
        });
    </script>
</body>
</html>
